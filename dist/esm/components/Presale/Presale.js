import{__awaiter as e}from"../../_virtual/_tslib.js";import{jsxs as n,jsx as t}from"react/jsx-runtime";import{useDynamicEvents as o,useOpenFundingOptions as i,useDynamicContext as l,DynamicWidget as r}from"@dynamic-labs/sdk-react-core";import{useState as c,useEffect as d,Fragment as a}from"react";import{useBalance as s}from"wagmi";import{Container as h,Title as u,WidgetContainer as p,ConnectButton as m,InfoRow as C,InfoText as y,TokenBalanceRow as g,TokenBalanceLabel as v,TokenBalanceValue as f,TokenIcon as b,ButtonGrid as k,Button as w,HelpText as j,HelpLink as O,ModalTitle as W,ModalText as x,ModalButtonContainer as T,IframeContainer as B,ModalOverlay as N,ModalContent as P,CloseButton as D}from"./components/StylesComponents.js";const S=({show:e,onHide:o,children:i,maxWidth:l,className:r,onTouchMoveCapture:c,theme:d="light"})=>e?t(N,Object.assign({show:e,onClick:()=>o(!1)},{children:n(P,Object.assign({theme:d,maxWidth:l,className:r,onClick:e=>e.stopPropagation()},{children:[t(D,Object.assign({onClick:()=>o(!1)},{children:"×"})),i]}))})):null,A=({title:N="Offer For Early Investors",discountedPrice:P,tokenSymbol:D,onBuyCrypto:A,onBuyCard:F,onBankTransfer:H,tokenValues:U,formatDisplayAmount:E,className:M="",theme:Y="light",buttonStyle:_})=>{const[z,I]=c(""),[L,R]=c(""),[V,$]=c(0),[q,G]=c(!1),[J,K]=c(!1),[Q,X]=c(!1);o("walletAdded",n=>e(void 0,void 0,void 0,function*(){"crypto"===L?(I("Crypto"),R(""),X(!1)):"card"===L&&(I("Card"),R(""),X(!1))}));const{openFundingOptions:Z}=i(),{user:ee,setShowAuthFlow:ne,primaryWallet:te}=l(),{data:oe}=s({address:null==te?void 0:te.address});d(()=>{null!==V&&(null==oe?void 0:oe.value)&&oe.value>V&&$(0)},[null==oe?void 0:oe.value,V]),d(()=>{(null==te?void 0:te.isConnected)&&(X(!1),"crypto"===L?I("Crypto"):"card"===L&&I("Card")),(null==te?void 0:te.isConnected)||I("")},[null==te?void 0:te.isConnected]);const ie={totalTokens:1e3};return n(a,{children:[n(h,Object.assign({theme:Y,className:M},{children:[t(u,{children:N}),t(p,{children:(null==te?void 0:te.isConnected)&&t(r,{variant:"modal",innerButtonComponent:t(m,{children:"Connect Wallet"})})}),n(C,{children:[t(y,{children:"Public Presale"}),n(y,{children:["Discounted Price - $",P||(null==U?void 0:U.price)," USD"]})]}),(null==te?void 0:te.isConnected)&&ie&&n(g,{children:[t(v,{children:"Token Balance"}),n(f,{children:[t(b,{src:"/assets/images/coin.png",alt:""}),E?E(ie.totalTokens):ie.totalTokens]})]}),""===z&&t("div",{children:n(k,{children:[t(w,Object.assign({style:_,fullWidth:!0,onClick:()=>{if(!ee)return X(!0),void R("crypto");A&&A(),I("Crypto")}},{children:"Buy with Crypto"})),t(w,Object.assign({fullWidth:!0,onClick:()=>{if(!ee)return X(!0),void R("card");F&&F(),I("Card")},style:_},{children:"Buy With Card"})),t(w,Object.assign({fullWidth:!0,className:"full-width-button",onClick:()=>{H&&H(),G(!0)},style:_},{children:"Bank Transfer/Others"}))]})}),"Card"!==z&&t(j,{children:n("p",{children:["Don't have enough Crypto?"," ",t(O,Object.assign({onClick:()=>K(!0)},{children:"Top up with Debit/Credit Card"}))]})})]})),n(S,Object.assign({show:J,onHide:K,maxWidth:"580px"},{children:[t(W,{children:"Top Up Your Wallet"}),n(x,{children:['To begin, please read the instructions and click "Continue." After you connect your wallet, select the ',t("strong",{children:'"Buy Crypto"'})," option and choose your preferred exchange (e.g., Coinbase or Banxa) to complete the top-up. Once your wallet is funded, return to the home page to purchase ",D," tokens."]}),t(T,{children:t(w,Object.assign({size:"large",onClick:()=>{(null==te?void 0:te.isConnected)||(ne(!0),K(!1)),Z()}},{children:"Continue"}))})]})),n(S,Object.assign({show:Q,onHide:X,maxWidth:"580px",theme:Y},{children:[t(W,{children:"Connect Your Wallet"}),n(x,{children:["To get started, please connect your wallet. Don't have one? No worries — just sign in with your email, and we'll create a wallet for you automatically!",n("i",{children:[t("b",{children:"Note:"})," We need your wallet to deliver your tokens once the project launches."]})]}),t(T,{children:t(w,Object.assign({onClick:()=>{(null==te?void 0:te.isConnected)||(ne(!0),X(!1))},style:_},{children:"Continue"}))})]})),t(S,Object.assign({show:q,onHide:G,maxWidth:"800px"},{children:t(B,{children:t("iframe",{width:"660",title:"Embedded URL",src:"https://form.typeform.com/to/rhFjPMgx"})})}))]})};A.displayName="PreSale";export{A as PreSale};
