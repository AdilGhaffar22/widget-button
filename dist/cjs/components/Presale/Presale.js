"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../_virtual/_tslib.js"),n=require("react/jsx-runtime"),t=require("@dynamic-labs/sdk-react-core"),o=require("react"),s=require("wagmi"),i=require("./components/StylesComponents.js");const l=({show:e,onHide:t,children:o,maxWidth:s,className:l,onTouchMoveCapture:r,theme:a="light"})=>e?n.jsx(i.ModalOverlay,Object.assign({show:e,onClick:()=>t(!1)},{children:n.jsxs(i.ModalContent,Object.assign({theme:a,maxWidth:s,className:l,onClick:e=>e.stopPropagation()},{children:[n.jsx(i.CloseButton,Object.assign({onClick:()=>t(!1)},{children:"×"})),o]}))})):null,r=({title:r="Offer For Early Investors",discountedPrice:a,tokenSymbol:c,onBuyCrypto:d,onBuyCard:u,onBankTransfer:h,tokenValues:j,formatDisplayAmount:x,className:p="",theme:C="light",buttonStyle:y})=>{const[m,g]=o.useState(""),[v,f]=o.useState(""),[b,k]=o.useState(0),[w,B]=o.useState(!1),[T,O]=o.useState(!1),[W,S]=o.useState(!1);t.useDynamicEvents("walletAdded",n=>e.__awaiter(void 0,void 0,void 0,function*(){"crypto"===v?(g("Crypto"),f(""),S(!1)):"card"===v&&(g("Card"),f(""),S(!1))}));const{openFundingOptions:M}=t.useOpenFundingOptions(),{user:D,setShowAuthFlow:P,primaryWallet:N}=t.useDynamicContext(),{data:q}=s.useBalance({address:null==N?void 0:N.address});o.useEffect(()=>{null!==b&&(null==q?void 0:q.value)&&q.value>b&&k(0)},[null==q?void 0:q.value,b]),o.useEffect(()=>{(null==N?void 0:N.isConnected)&&(S(!1),"crypto"===v?g("Crypto"):"card"===v&&g("Card")),(null==N?void 0:N.isConnected)||g("")},[null==N?void 0:N.isConnected]);const F={totalTokens:1e3};return n.jsxs(o.Fragment,{children:[n.jsxs(i.Container,Object.assign({theme:C,className:p},{children:[n.jsx(i.Title,{children:r}),n.jsx(i.WidgetContainer,{children:(null==N?void 0:N.isConnected)&&n.jsx(t.DynamicWidget,{variant:"modal",innerButtonComponent:n.jsx(i.ConnectButton,{children:"Connect Wallet"})})}),n.jsxs(i.InfoRow,{children:[n.jsx(i.InfoText,{children:"Public Presale"}),n.jsxs(i.InfoText,{children:["Discounted Price - $",a||(null==j?void 0:j.price)," USD"]})]}),(null==N?void 0:N.isConnected)&&F&&n.jsxs(i.TokenBalanceRow,{children:[n.jsx(i.TokenBalanceLabel,{children:"Token Balance"}),n.jsxs(i.TokenBalanceValue,{children:[n.jsx(i.TokenIcon,{src:"/assets/images/coin.png",alt:""}),x?x(F.totalTokens):F.totalTokens]})]}),""===m&&n.jsx("div",{children:n.jsxs(i.ButtonGrid,{children:[n.jsx(i.Button,Object.assign({style:y,fullWidth:!0,onClick:()=>{if(!D)return S(!0),void f("crypto");d&&d(),g("Crypto")}},{children:"Buy with Crypto"})),n.jsx(i.Button,Object.assign({fullWidth:!0,onClick:()=>{if(!D)return S(!0),void f("card");u&&u(),g("Card")},style:y},{children:"Buy With Card"})),n.jsx(i.Button,Object.assign({fullWidth:!0,className:"full-width-button",onClick:()=>{h&&h(),B(!0)},style:y},{children:"Bank Transfer/Others"}))]})}),"Card"!==m&&n.jsx(i.HelpText,{children:n.jsxs("p",{children:["Don't have enough Crypto?"," ",n.jsx(i.HelpLink,Object.assign({onClick:()=>O(!0)},{children:"Top up with Debit/Credit Card"}))]})})]})),n.jsxs(l,Object.assign({show:T,onHide:O,maxWidth:"580px"},{children:[n.jsx(i.ModalTitle,{children:"Top Up Your Wallet"}),n.jsxs(i.ModalText,{children:['To begin, please read the instructions and click "Continue." After you connect your wallet, select the ',n.jsx("strong",{children:'"Buy Crypto"'})," option and choose your preferred exchange (e.g., Coinbase or Banxa) to complete the top-up. Once your wallet is funded, return to the home page to purchase ",c," tokens."]}),n.jsx(i.ModalButtonContainer,{children:n.jsx(i.Button,Object.assign({size:"large",onClick:()=>{(null==N?void 0:N.isConnected)||(P(!0),O(!1)),M()}},{children:"Continue"}))})]})),n.jsxs(l,Object.assign({show:W,onHide:S,maxWidth:"580px",theme:C},{children:[n.jsx(i.ModalTitle,{children:"Connect Your Wallet"}),n.jsxs(i.ModalText,{children:["To get started, please connect your wallet. Don't have one? No worries — just sign in with your email, and we'll create a wallet for you automatically!",n.jsxs("i",{children:[n.jsx("b",{children:"Note:"})," We need your wallet to deliver your tokens once the project launches."]})]}),n.jsx(i.ModalButtonContainer,{children:n.jsx(i.Button,Object.assign({onClick:()=>{(null==N?void 0:N.isConnected)||(P(!0),S(!1))},style:y},{children:"Continue"}))})]})),n.jsx(l,Object.assign({show:w,onHide:B,maxWidth:"800px"},{children:n.jsx(i.IframeContainer,{children:n.jsx("iframe",{width:"660",title:"Embedded URL",src:"https://form.typeform.com/to/rhFjPMgx"})})}))]})};r.displayName="PreSale",exports.PreSale=r;
