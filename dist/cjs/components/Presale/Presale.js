"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../_virtual/_tslib.js"),t=require("react/jsx-runtime"),n=require("@dynamic-labs/sdk-react-core"),s=require("react"),o=require("wagmi"),l=require("./components/StylesComponents.js");const i=({show:e,onHide:n,children:s,maxWidth:o,className:i,onTouchMoveCapture:r,theme:a="light"})=>e?t.jsx(l.ModalOverlay,Object.assign({show:e,onClick:()=>n(!1)},{children:t.jsxs(l.ModalContent,Object.assign({theme:a,maxWidth:o,className:i,onClick:e=>e.stopPropagation()},{children:[t.jsx(l.CloseButton,Object.assign({onClick:()=>n(!1)},{children:"×"})),s]}))})):null,r=({title:r="Offer For Early Investors",discountedPrice:a,tokenSymbol:c,onBuyCrypto:d,onBuyCard:u,onBankTransfer:h,tokenValues:j,formatDisplayAmount:x,titleStyle:y,className:p="",theme:C="light",buttonStyle:m,contentStyle:g,container:v,modalStyle:b,hrefStyle:f})=>{const[k,O]=s.useState(""),[w,B]=s.useState(""),[T,S]=s.useState(0),[W,M]=s.useState(!1),[D,P]=s.useState(!1),[N,q]=s.useState(!1);n.useDynamicEvents("walletAdded",t=>e.__awaiter(void 0,void 0,void 0,function*(){"crypto"===w?(O("Crypto"),B(""),q(!1)):"card"===w&&(O("Card"),B(""),q(!1))}));const{openFundingOptions:F}=n.useOpenFundingOptions(),{user:H,setShowAuthFlow:I,primaryWallet:_}=n.useDynamicContext(),{data:E}=o.useBalance({address:null==_?void 0:_.address});s.useEffect(()=>{null!==T&&(null==E?void 0:E.value)&&E.value>T&&S(0)},[null==E?void 0:E.value,T]),s.useEffect(()=>{(null==_?void 0:_.isConnected)&&(q(!1),"crypto"===w?O("Crypto"):"card"===w&&O("Card")),(null==_?void 0:_.isConnected)||O("")},[null==_?void 0:_.isConnected]);const A={totalTokens:1e3};return t.jsxs(s.Fragment,{children:[t.jsxs(l.Container,Object.assign({theme:C,className:p,style:v},{children:[t.jsx(l.Title,Object.assign({style:y},{children:r})),t.jsx(l.WidgetContainer,{children:(null==_?void 0:_.isConnected)&&t.jsx(n.DynamicWidget,{variant:"modal",innerButtonComponent:t.jsx(l.ConnectButton,{children:"Connect Wallet"})})}),t.jsxs(l.InfoRow,{children:[t.jsx(l.InfoText,Object.assign({style:g},{children:"Public Presale"})),t.jsxs(l.InfoText,Object.assign({style:g},{children:["Discounted Price - $",a||(null==j?void 0:j.price)," USD"]}))]}),(null==_?void 0:_.isConnected)&&A&&t.jsxs(l.TokenBalanceRow,{children:[t.jsx(l.TokenBalanceLabel,Object.assign({style:g},{children:"Token Balance"})),t.jsxs(l.TokenBalanceValue,{children:[t.jsx(l.TokenIcon,{src:"/assets/images/coin.png",alt:""}),x?x(A.totalTokens):A.totalTokens]})]}),""===k&&t.jsx("div",{children:t.jsxs(l.ButtonGrid,{children:[t.jsx(l.Button,Object.assign({style:m,fullWidth:!0,onClick:()=>{if(!H)return q(!0),void B("crypto");d&&d(),O("Crypto")}},{children:"Buy with Crypto"})),t.jsx(l.Button,Object.assign({fullWidth:!0,onClick:()=>{if(!H)return q(!0),void B("card");u&&u(),O("Card")},style:m},{children:"Buy With Card"})),t.jsx(l.Button,Object.assign({fullWidth:!0,className:"full-width-button",onClick:()=>{h&&h(),M(!0)},style:m},{children:"Bank Transfer/Others"}))]})}),"Card"!==k&&t.jsx(l.HelpText,{children:t.jsxs("p",{children:["Don't have enough Crypto?"," ",t.jsx(l.HelpLink,Object.assign({onClick:()=>P(!0),style:f},{children:"Top up with Debit/Credit Card"}))]})})]})),t.jsxs(i,Object.assign({show:D,onHide:P,maxWidth:"580px",theme:C,style:b},{children:[t.jsx(l.ModalTitle,{children:"Top Up Your Wallet"}),t.jsxs(l.ModalText,{children:['To begin, please read the instructions and click "Continue." After you connect your wallet, select the ',t.jsx("strong",{children:'"Buy Crypto"'})," option and choose your preferred exchange (e.g., Coinbase or Banxa) to complete the top-up. Once your wallet is funded, return to the home page to purchase ",c," tokens."]}),t.jsx(l.ModalButtonContainer,{children:t.jsx(l.Button,Object.assign({size:"large",onClick:()=>{(null==_?void 0:_.isConnected)||(I(!0),P(!1)),F()}},{children:"Continue"}))})]})),t.jsxs(i,Object.assign({show:N,onHide:q,maxWidth:"580px",theme:C,style:b},{children:[t.jsx(l.ModalTitle,{children:"Connect Your Wallet"}),t.jsxs(l.ModalText,{children:["To get started, please connect your wallet. Don't have one? No worries — just sign in with your email, and we'll create a wallet for you automatically!",t.jsxs("i",{children:[t.jsx("b",{children:"Note:"})," We need your wallet to deliver your tokens once the project launches."]})]}),t.jsx(l.ModalButtonContainer,{children:t.jsx(l.Button,Object.assign({onClick:()=>{(null==_?void 0:_.isConnected)||(I(!0),q(!1))},style:m},{children:"Continue"}))})]})),t.jsx(i,Object.assign({show:W,onHide:M,maxWidth:"800px",theme:C,style:b},{children:t.jsx(l.IframeContainer,{children:t.jsx("iframe",{width:"660",title:"Embedded URL",src:"https://form.typeform.com/to/rhFjPMgx"})})}))]})};r.displayName="PreSale",exports.PreSale=r;
