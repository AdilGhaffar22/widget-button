"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../_virtual/_tslib.js"),t=require("react/jsx-runtime"),n=require("@dynamic-labs/sdk-react-core"),s=require("react"),o=require("wagmi"),l=require("./components/StylesComponents.js");const i=({show:e,onHide:n,children:s,maxWidth:o,className:i,theme:a="light"})=>e?t.jsx(l.ModalOverlay,Object.assign({show:e,onClick:()=>n(!1)},{children:t.jsxs(l.ModalContent,Object.assign({theme:a,maxWidth:o,className:i,onClick:e=>e.stopPropagation()},{children:[t.jsx(l.CloseButton,Object.assign({onClick:()=>n(!1)},{children:"×"})),s]}))})):null,a=({title:a="Offer For Early Investors",description:r,discountedPrice:c,tokenSymbol:d,onBuyCrypto:u,onBuyCard:h,onBankTransfer:j,tokenValues:x,formatDisplayAmount:y,titleStyle:p,className:C="",theme:m="light",buttonStyle:g,contentStyle:b,container:f,modalStyle:v,hrefStyle:k,tokenImage:O})=>{const[w,B]=s.useState(""),[T,S]=s.useState(""),[W,M]=s.useState(0),[D,P]=s.useState(!1),[I,N]=s.useState(!1),[q,F]=s.useState(!1);n.useDynamicEvents("walletAdded",t=>e.__awaiter(void 0,void 0,void 0,function*(){"crypto"===T?(B("Crypto"),S(""),F(!1)):"card"===T&&(B("Card"),S(""),F(!1))}));const{openFundingOptions:H}=n.useOpenFundingOptions(),{user:_,setShowAuthFlow:E,primaryWallet:A}=n.useDynamicContext(),{data:L}=o.useBalance({address:null==A?void 0:A.address});s.useEffect(()=>{null!==W&&(null==L?void 0:L.value)&&L.value>W&&M(0)},[null==L?void 0:L.value,W]),s.useEffect(()=>{(null==A?void 0:A.isConnected)&&(F(!1),"crypto"===T?B("Crypto"):"card"===T&&B("Card")),(null==A?void 0:A.isConnected)||B("")},[null==A?void 0:A.isConnected]);const R={totalTokens:1e3};return t.jsxs(s.Fragment,{children:[t.jsxs(l.Container,Object.assign({theme:m,className:C,style:f},{children:[t.jsx(l.Title,Object.assign({style:p},{children:a})),r&&t.jsx(l.InfoText,Object.assign({style:Object.assign({display:"block",width:"fit-content",margin:"0 auto"},b)},{children:r})),t.jsx(l.WidgetContainer,{children:(null==A?void 0:A.isConnected)&&t.jsx(n.DynamicWidget,{variant:"modal",innerButtonComponent:t.jsx(l.ConnectButton,{children:"Connect Wallet"})})}),t.jsxs(l.InfoRow,{children:[t.jsx(l.InfoText,Object.assign({style:b},{children:"Public Presale"})),t.jsxs(l.InfoText,Object.assign({style:b},{children:["Discounted Price - $",c||(null==x?void 0:x.price)," USD"]}))]}),(null==A?void 0:A.isConnected)&&R&&t.jsxs(l.TokenBalanceRow,{children:[t.jsx(l.TokenBalanceLabel,Object.assign({style:b},{children:"Token Balance"})),t.jsxs(l.TokenBalanceValue,{children:[t.jsx(l.TokenIcon,{src:O,alt:"Token",height:24,width:24}),y?y(R.totalTokens):R.totalTokens]})]}),""===w&&t.jsx("div",{children:t.jsxs(l.ButtonGrid,{children:[t.jsx(l.Button,Object.assign({style:g,fullWidth:!0,onClick:()=>{if(!_)return F(!0),void S("crypto");u&&u(),B("Crypto")}},{children:"Buy with Crypto"})),t.jsx(l.Button,Object.assign({fullWidth:!0,onClick:()=>{if(!_)return F(!0),void S("card");h&&h(),B("Card")},style:g},{children:"Buy With Card"})),t.jsx(l.Button,Object.assign({fullWidth:!0,className:"full-width-button",onClick:()=>{j&&j(),P(!0)},style:g},{children:"Bank Transfer/Others"}))]})}),"Card"!==w&&t.jsx(l.HelpText,{children:t.jsxs("p",Object.assign({style:b},{children:["Don't have enough Crypto?"," ",t.jsx(l.HelpLink,Object.assign({onClick:()=>N(!0),style:k},{children:"Top up with Debit/Credit Card"}))]}))})]})),t.jsxs(i,Object.assign({show:I,onHide:N,maxWidth:"580px",theme:m,style:v},{children:[t.jsx(l.ModalTitle,{children:"Top Up Your Wallet"}),t.jsxs(l.ModalText,{children:['To begin, please read the instructions and click "Continue." After you connect your wallet, select the ',t.jsx("strong",{children:'"Buy Crypto"'})," option and choose your preferred exchange (e.g., Coinbase or Banxa) to complete the top-up. Once your wallet is funded, return to the home page to purchase ",d," tokens."]}),t.jsx(l.ModalButtonContainer,{children:t.jsx(l.Button,Object.assign({size:"large",onClick:()=>{(null==A?void 0:A.isConnected)||(E(!0),N(!1)),H()}},{children:"Continue"}))})]})),t.jsxs(i,Object.assign({show:q,onHide:F,maxWidth:"580px",theme:m,style:v},{children:[t.jsx(l.ModalTitle,{children:"Connect Your Wallet"}),t.jsxs(l.ModalText,{children:["To get started, please connect your wallet. Don't have one? No worries — just sign in with your email, and we'll create a wallet for you automatically!",t.jsxs("i",{children:[t.jsx("b",{children:"Note:"})," We need your wallet to deliver your tokens once the project launches."]})]}),t.jsx(l.ModalButtonContainer,{children:t.jsx(l.Button,Object.assign({onClick:()=>{(null==A?void 0:A.isConnected)||(E(!0),F(!1))},style:g},{children:"Continue"}))})]})),t.jsx(i,Object.assign({show:D,onHide:P,maxWidth:"800px",theme:m,style:v},{children:t.jsx(l.IframeContainer,{children:t.jsx("iframe",{width:"660",title:"Embedded URL",src:"https://form.typeform.com/to/rhFjPMgx"})})}))]})};a.displayName="PreSale",exports.PreSale=a;
