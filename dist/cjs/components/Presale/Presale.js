"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../_virtual/_tslib.js"),n=require("react/jsx-runtime"),t=require("@dynamic-labs/sdk-react-core"),o=require("react"),s=require("wagmi"),i=require("./components/StylesComponents.js");const l=({show:e,onHide:t,children:o,maxWidth:s,className:l})=>e?n.jsx(i.ModalOverlay,Object.assign({show:e,onClick:()=>t(!1)},{children:n.jsxs(i.ModalContent,Object.assign({maxWidth:s,className:l,onClick:e=>e.stopPropagation()},{children:[n.jsx(i.CloseButton,Object.assign({onClick:()=>t(!1)},{children:"×"})),o]}))})):null,r=({title:r="Offer For Early Investors",discountedPrice:a,tokenSymbol:c,onBuyCrypto:d,onBuyCard:u,onBankTransfer:h,tokenValues:j,formatDisplayAmount:x,className:p="",theme:C="light"})=>{const[m,y]=o.useState(""),[g,v]=o.useState(""),[f,k]=o.useState(0),[b,w]=o.useState(!1),[B,T]=o.useState(!1),[O,W]=o.useState(!1);t.useDynamicEvents("walletAdded",n=>e.__awaiter(void 0,void 0,void 0,function*(){"crypto"===g?(y("Crypto"),v(""),W(!1)):"card"===g&&(y("Card"),v(""),W(!1))}));const{openFundingOptions:S}=t.useOpenFundingOptions(),{user:M,setShowAuthFlow:D,primaryWallet:P}=t.useDynamicContext(),{data:N}=s.useBalance({address:null==P?void 0:P.address});o.useEffect(()=>{null!==f&&(null==N?void 0:N.value)&&N.value>f&&k(0)},[null==N?void 0:N.value,f]),o.useEffect(()=>{(null==P?void 0:P.isConnected)&&(W(!1),"crypto"===g?y("Crypto"):"card"===g&&y("Card")),(null==P?void 0:P.isConnected)||y("")},[null==P?void 0:P.isConnected]);const q={totalTokens:1e3};return n.jsxs(o.Fragment,{children:[n.jsxs(i.Container,Object.assign({theme:C,className:p},{children:[n.jsx(i.Title,{children:r}),n.jsx(i.WidgetContainer,{children:(null==P?void 0:P.isConnected)&&n.jsx(t.DynamicWidget,{variant:"modal",innerButtonComponent:n.jsx(i.ConnectButton,{children:"Connect Wallet"})})}),n.jsxs(i.InfoRow,{children:[n.jsx(i.InfoText,{children:"Public Presale"}),n.jsxs(i.InfoText,{children:["Discounted Price - $",a||(null==j?void 0:j.price)," USD"]})]}),(null==P?void 0:P.isConnected)&&q&&n.jsxs(i.TokenBalanceRow,{children:[n.jsx(i.TokenBalanceLabel,{children:"Token Balance"}),n.jsxs(i.TokenBalanceValue,{children:[n.jsx(i.TokenIcon,{src:"/assets/images/coin.png",alt:""}),x?x(q.totalTokens):q.totalTokens]})]}),""===m&&n.jsx("div",{children:n.jsxs(i.ButtonGrid,{children:[n.jsx(i.Button,Object.assign({fullWidth:!0,onClick:()=>{if(!M)return W(!0),void v("crypto");d&&d(),y("Crypto")}},{children:"Buy with Crypto"})),n.jsx(i.Button,Object.assign({fullWidth:!0,onClick:()=>{if(!M)return W(!0),void v("card");u&&u(),y("Card")}},{children:"Buy With Card"})),n.jsx(i.Button,Object.assign({fullWidth:!0,className:"full-width-button",onClick:()=>{h&&h(),w(!0)}},{children:"Bank Transfer/Others"}))]})}),"Card"!==m&&n.jsx(i.HelpText,{children:n.jsxs("p",{children:["Don't have enough Crypto?"," ",n.jsx(i.HelpLink,Object.assign({onClick:()=>T(!0)},{children:"Top up with Debit/Credit Card"}))]})})]})),n.jsxs(l,Object.assign({show:B,onHide:T,maxWidth:"580px"},{children:[n.jsx(i.ModalTitle,{children:"Top Up Your Wallet"}),n.jsxs(i.ModalText,{children:['To begin, please read the instructions and click "Continue." After you connect your wallet, select the ',n.jsx("strong",{children:'"Buy Crypto"'})," option and choose your preferred exchange (e.g., Coinbase or Banxa) to complete the top-up. Once your wallet is funded, return to the home page to purchase ",c," tokens."]}),n.jsx(i.ModalButtonContainer,{children:n.jsx(i.Button,Object.assign({size:"large",onClick:()=>{(null==P?void 0:P.isConnected)||(D(!0),T(!1)),S()}},{children:"Continue"}))})]})),n.jsxs(l,Object.assign({show:O,onHide:W,maxWidth:"580px"},{children:[n.jsx(i.ModalTitle,{children:"Connect Your Wallet"}),n.jsxs(i.ModalText,{children:["To get started, please connect your wallet. Don't have one? No worries — just sign in with your email, and we'll create a wallet for you automatically!",n.jsxs("i",{children:[n.jsx("b",{children:"Note:"})," We need your wallet to deliver your tokens once the project launches."]})]}),n.jsx(i.ModalButtonContainer,{children:n.jsx(i.Button,Object.assign({size:"large",onClick:()=>{(null==P?void 0:P.isConnected)||(D(!0),W(!1))}},{children:"Continue"}))})]})),n.jsx(l,Object.assign({show:b,onHide:w,maxWidth:"800px"},{children:n.jsx(i.IframeContainer,{children:n.jsx("iframe",{width:"660",title:"Embedded URL",src:"https://form.typeform.com/to/rhFjPMgx"})})}))]})};r.displayName="PreSale",exports.PreSale=r;
